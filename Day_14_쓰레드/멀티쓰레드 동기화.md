# ë©€í‹°ì“°ë ˆë“œ ë™ê¸°í™”(synchronized, Lock)

---

## ðŸ§© ë©€í‹°ì“°ë ˆë“œ ë™ê¸°í™” ì •ë¦¬

### 1. ì™œ ë™ê¸°í™”ê°€ í•„ìš”í•œê°€?
- ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œê°€ **ê³µìœ  ìžì›(ë³€ìˆ˜, ê°ì²´)**ì— ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìžˆìŒ.  
- ì´ë•Œ **ë°ì´í„° ë¶ˆì¼ì¹˜, ê²½í•© ì¡°ê±´(Race Condition)**ì´ ë°œìƒí•  ìˆ˜ ìžˆìŒ.  
- ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ **ë™ê¸°í™”(Synchronization)**ê°€ í•„ìš”.  

---

### 2. ë™ê¸°í™” ë°©ë²•

#### (1) `synchronized` í‚¤ì›Œë“œ
- **ë©”ì„œë“œ ë™ê¸°í™”**: ë©”ì„œë“œ ì „ì²´ë¥¼ ìž„ê³„ ì˜ì—­(Critical Section)ìœ¼ë¡œ ì§€ì •  
- **ë¸”ë¡ ë™ê¸°í™”**: íŠ¹ì • ì½”ë“œ ë¸”ë¡ë§Œ ë™ê¸°í™”  
- í•œ ë²ˆì— í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ í•´ë‹¹ ì˜ì—­ ì‹¤í–‰ ê°€ëŠ¥  

#### (2) `Lock` ì¸í„°íŽ˜ì´ìŠ¤ (java.util.concurrent.locks)
- ë” ì„¸ë°€í•œ ì œì–´ ê°€ëŠ¥ (`tryLock()`, `lockInterruptibly()` ë“±)  
- ëª…ì‹œì ìœ¼ë¡œ `lock()` â†’ ìž‘ì—… â†’ `unlock()` í˜¸ì¶œ í•„ìš”  
- `ReentrantLock`ì´ ëŒ€í‘œì ì¸ êµ¬í˜„ì²´  

---

## ðŸ’» ì˜ˆì œ ì½”ë“œ

### ì˜ˆì œ 1: `synchronized` ì‚¬ìš©
```java
class Counter {
    private int count = 0;

    // ë©”ì„œë“œ ì „ì²´ ë™ê¸°í™”
    public synchronized void increment() {
        count++;
    }

    public int getCount() {
        return count;
    }
}

public class SyncExample {
    public static void main(String[] args) throws InterruptedException {
        Counter counter = new Counter();

        Runnable task = () -> {
            for (int i = 0; i < 1000; i++) {
                counter.increment();
            }
        };

        Thread t1 = new Thread(task);
        Thread t2 = new Thread(task);

        t1.start();
        t2.start();

        t1.join();
        t2.join();

        System.out.println("ìµœì¢… ì¹´ìš´íŠ¸: " + counter.getCount());
    }
}
```
ðŸ‘‰ `synchronized` ë•ë¶„ì— ë‘ ì“°ë ˆë“œê°€ ë™ì‹œì— `increment()`ì— ì ‘ê·¼í•˜ì§€ ëª»í•´ ì•ˆì „í•˜ê²Œ ê°’ ì¦ê°€.

---

### ì˜ˆì œ 2: `Lock` ì‚¬ìš©
```java
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

class CounterWithLock {
    private int count = 0;
    private Lock lock = new ReentrantLock();

    public void increment() {
        lock.lock(); // Lock íšë“
        try {
            count++;
        } finally {
            lock.unlock(); // ë°˜ë“œì‹œ í•´ì œ
        }
    }

    public int getCount() {
        return count;
    }
}

public class LockExample {
    public static void main(String[] args) throws InterruptedException {
        CounterWithLock counter = new CounterWithLock();

        Runnable task = () -> {
            for (int i = 0; i < 1000; i++) {
                counter.increment();
            }
        };

        Thread t1 = new Thread(task);
        Thread t2 = new Thread(task);

        t1.start();
        t2.start();

        t1.join();
        t2.join();

        System.out.println("ìµœì¢… ì¹´ìš´íŠ¸: " + counter.getCount());
    }
}
```
ðŸ‘‰ `ReentrantLock`ì„ ì‚¬ìš©í•´ ëª…ì‹œì ìœ¼ë¡œ Lockì„ ì œì–´. `finally` ë¸”ë¡ì—ì„œ ë°˜ë“œì‹œ `unlock()` í˜¸ì¶œí•´ì•¼ ì•ˆì „.

---

## âš¡ í•µì‹¬ í¬ì¸íŠ¸
- `synchronized`: ê°„ë‹¨í•˜ê³  ì§ê´€ì , í•˜ì§€ë§Œ ìœ ì—°ì„±ì´ ë–¨ì–´ì§.  
- `Lock`: ë” ë§Žì€ ê¸°ëŠ¥ ì œê³µ, ëª…ì‹œì  ì œì–´ ê°€ëŠ¥.  
- ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œëŠ” **ê³µìœ  ìžì› ì ‘ê·¼ ì‹œ ë°˜ë“œì‹œ ë™ê¸°í™”** í•„ìš”.  

---
